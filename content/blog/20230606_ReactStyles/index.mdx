---
title: Reacté¡¹ç›®æ ·å¼è§£å†³æ–¹æ¡ˆæ‚è°ˆ
date: '2023-06-06T20:40:00'
description: å¯¹ SCSS, CSS Modules, Styled-components, TailwindCSS ç­‰æ ·å¼è§£å†³æ–¹æ¡ˆçš„ä¸ªäººæ„Ÿå—~
tag: ['FE']
---

å¯¹ SCSS, CSS Modules, Styled-components, TailwindCSS ç­‰æ ·å¼è§£å†³æ–¹æ¡ˆçš„ä¸ªäººæ„Ÿå—~

å¯¹äºå„ä¸ªæ–¹æ¡ˆï¼Œæœ¬æ–‡é¦–å…ˆä¼šé€šè¿‡ä¸€ä¸ªç®€å•çš„ button ç¤ºä¾‹æ¥ä»‹ç»å…¶ä½¿ç”¨é£æ ¼ï¼Œç„¶åè¿›è¡Œä¼˜ç¼ºç‚¹åˆ†æ~

## SCSS

### ç¤ºä¾‹

```scss
$text-white: rgb(255 255 255) !default;
$bg-blue: rgb(56 189 248) !default;
$bg-blue-hover: rgb(125 211 252) !default;
$bg-red: rgb(248 113 113) !default;
$bg-red-hover: rgb(252 165 165) !default;

.btn {
  border-width: 0px;
  border-radius: 9999px;
  padding-left: 1.5rem;
  padding-right: 1.5rem;
  padding-top: 0.5rem;
  padding-bottom: 0.5rem;
  color: $text-white;
}

.btn-color-blue {
  background-color: $bg-blue;
  &:hover {
    background-color: $bg-blue-hover;
  }
}

.btn-color-red {
  background-color: $bg-red;
  &:hover {
    background-color: $bg-red-hover;
  }
}
```

```javascript
import React from 'react'
import './index.scss'

function App() {
  return (
    <div>
      <button className="btn btn-color-blue">Blue Button</button>
      <button className="btn btn-color-red">Red Button</button>
    </div>
  )
}

export default App
```

### åˆ†æ

SCSS æ˜¯ä¸€ä¸ªæ¯”è¾ƒä¼ ç»Ÿå’Œæˆç†Ÿçš„æ ·å¼è§£å†³æ–¹æ¡ˆï¼Œå®ƒå°†æ ·å¼ä¸ç»„ä»¶çš„å…³æ³¨ç‚¹åˆ†ç¦»ï¼Œä½¿ç”¨åŸç”Ÿçš„æ ·å¼å†™æ³•ï¼Œæ”¯æŒ CSS æ‰€æœ‰è¯­æ³•ï¼ŒåŠŸèƒ½å¼ºå¤§ã€‚ä½†æ˜¯å…¶å…¨å±€æ ·å¼æ˜¯ä¸€å¤§ç—›ç‚¹ï¼Œåœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œå¦‚æœå›¢é˜Ÿå†…éƒ¨æ²¡æœ‰è‰¯å¥½çš„å‘½åè§„èŒƒï¼ˆè¿™æ— ç–‘ä¹Ÿåœ¨ä¸€å®šç¨‹åº¦ä¸ŠåŠ é‡äº†å¼€å‘äººå‘˜çš„å¿ƒæ™ºè´Ÿæ‹…ï¼‰ï¼Œå®¹æ˜“å‡ºç°æ ·å¼å†²çªã€‚æ­¤å¤–ï¼Œå…¶å…³æ³¨ç‚¹åˆ†ç¦»çš„å†™æ³•ä¹Ÿä½¿å¾—æ ·å¼æ–‡ä»¶ä¸­çš„å†…å®¹ä¸ç»„ä»¶ä¹‹é—´æ²¡æœ‰æ¸…æ™°çš„å¯¹åº”å…³ç³»ï¼Œéš¾ä»¥åˆ†è¾¨å“ªäº›æ˜¯æ— ç”¨æ ·å¼ï¼Œè¿™å¯¼è‡´éšç€é¡¹ç›®çš„ä¸æ–­è¿­ä»£ä»¥åŠæ— ç”¨ä»£ç çš„ä¸æ–­å †ç§¯ï¼Œé¡¹ç›®çš„æ ·å¼ä»£ç éš¾ä»¥ç»´æŠ¤ï¼ŒåŠ è½½åˆ°æµè§ˆå™¨çš„æ ·å¼ä¹Ÿè¶Šæ¥è¶Šå¤šï¼Œä¼šå¯¹æ€§èƒ½äº§ç”Ÿä¸€å®šçš„å½±å“ã€‚

## CSS Modules

### ç¤ºä¾‹

```css
// colors.modules.css
@value textWhite: rgb(255 255 255);
@value bgBlue: rgb(56 189 248);
@value bgBlueHover: rgb(125 211 252);
@value bgRed: rgb(248 113 113);
@value bgRedHover: rgb(252 165 165);

// Button.modules.css
@value colors: "./colors.modules.css";
@value textWhite, bgBlue, bgBlueHover, bgRed, bgRedHover from colors;

.btn {
  border-width: 0px;
  border-radius: 9999px;
  padding-left: 1.5rem;
  padding-right: 1.5rem;
  padding-top: 0.5rem;
  padding-bottom: 0.5rem;
  color: textWhite;
}

.btnColorBlue {
  background-color: bgBlue;
  &:hover {
    background-color: bgBlueHover;
  }
}

.btnColorRed {
  background-color: bgRed;
  &:hover {
    background-color: bgRedHover;
  }
}
```

```javascript
import React from 'react'
import style from './Button.modules.css'

export default () => {
  return (
    <div>
      <button className={`${style.btn} ${style.btnColorBlue}`}>Blue Button</button>
      <button className={`${style.btn} ${style.btnColorRed}`}>Red Button</button>
    </div>
  )
}
```

### åˆ†æ

CSS Modules é€šè¿‡å“ˆå¸Œç¼–ç æ¥é¿å…å…¨å±€çš„æ ·å¼å†²çªï¼Œä¸Šè¿°ä»£ç ç¼–è¯‘åçš„ç»“æœå¦‚ä¸‹ï¼š

```scss
.aR6sN0Sm-Q7pRuWpSorbZ {
  border-width: 0;
  border-radius: 9999px;
  padding: 0.5rem 1.5rem;
  color: rgb(255 255 255);
}

._2T4ooxe7Tr3I5JkEMLod7P {
  background-color: rgb(56 189 248);
}

._3CJsZOtoCJ9XpYfJp_6pot {
  background-color: rgb(248 113 113);
}
```

```html
<div data-reactroot="">
  <button class="aR6sN0Sm-Q7pRuWpSorbZ _2T4ooxe7Tr3I5JkEMLod7P">Blue Button</button>
  <button class="aR6sN0Sm-Q7pRuWpSorbZ _3CJsZOtoCJ9XpYfJp_6pot">Red Button</button>
</div>
```

CSS Modules é€šè¿‡å¼•å…¥å“ˆå¸Œç¼–ç çš„å±€éƒ¨ä½œç”¨åŸŸï¼Œæ¥ç¡®ä¿æ¯ä¸ªç»„ä»¶çš„æ ·å¼éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œä»è€Œé¿å…äº†å› ç±»åé‡å¤è€Œå¼•å‘çš„æ ·å¼å†²çªé—®é¢˜ã€‚CSS Modules ä¸­çš„ç»„åˆç”¨æ³•ï¼Œä¹Ÿå…è®¸ä¸åŒç»„ä»¶ä¹‹é—´çš„æ ·å¼å…±äº«ï¼Œæé«˜äº†æ ·å¼çš„å¯é‡ç”¨æ€§ã€‚ä½†æ˜¯ CSS Modules ä¼šå¸¦æ¥ä¸€å®šçš„å­¦ä¹ å’Œä½¿ç”¨æˆæœ¬ï¼Œå…¶éœ€è¦é¢å¤–çš„é…ç½®å’Œå·¥å…·æ”¯æŒï¼Œä¸”æ ·å¼è¦†ç›–æ¯”è¾ƒéº»çƒ¦ï¼Œè¯­æ³•è¿˜åªå…è®¸é©¼å³°å‘½åï¼ˆä¸åŸç”Ÿ CSS å†™æ³•ç›¸æ¯”æœ‰äº›åˆ«æ‰­ï¼‰ã€‚æ­¤å¤–ï¼ŒCSS Modules æ— æ³•åŠ¨æ€è·å–ç»„ä»¶çš„çŠ¶æ€ï¼Œä»å¼€å‘ä½“éªŒå±‚é¢æ¥è®²ï¼Œç¼ºä¹ä¸€å®šçš„çµæ´»æ€§ã€‚

## Styled-components

### ç¤ºä¾‹

```javascript
import React from 'react'
import styled from 'styled-components'

const StyledButton = styled.button`
  border-width: 0px;
  border-radius: 9999px;
  padding-left: 1.5rem;
  padding-right: 1.5rem;
  padding-top: 0.5rem;
  padding-bottom: 0.5rem;
  color: rgb(255 255 255);
  background-color: ${(props) => (props.color === 'blue' ? 'rgb(56 189 248)' : 'rgb(248 113 113)')};
  &:hover {
    background-color: ${(props) => (props.color === 'blue' ? 'rgb(125 211 252)' : 'rgb(252 165 165)')};
  }
`

function App() {
  return (
    <div>
      <StyledButton color="blue">Blue Button</StyledButton>
      <StyledButton color="red">Red Button</StyledButton>
    </div>
  )
}

export default App
```

Styled-components æœ€ç»ˆæ’å…¥çš„æ ·å¼ä¸ºï¼š

```html
<style data-styled="active" data-styled-version="6.0.0-rc.3">
  .jipIVa {
    border-width: 0px;
    border-radius: 9999px;
    padding-left: 1.5rem;
    padding-right: 1.5rem;
    padding-top: 0.5rem;
    padding-bottom: 0.5rem;
    color: rgb(255 255 255);
    background-color: rgb(56 189 248);
  }
  .jipIVa:hover {
    background-color: rgb(125 211 252);
  }
  .iakVcJ {
    border-width: 0px;
    border-radius: 9999px;
    padding-left: 1.5rem;
    padding-right: 1.5rem;
    padding-top: 0.5rem;
    padding-bottom: 0.5rem;
    color: rgb(255 255 255);
    background-color: rgb(248 113 113);
  }
  .iakVcJ:hover {
    background-color: rgb(252 165 165);
  }
</style>
```

### åˆ†æ

#### ä¼˜ç‚¹

- é€šè¿‡å“ˆå¸Œç¼–ç æ¥ä¿è¯ç±»åçš„å”¯ä¸€æ€§ï¼Œé™åˆ¶äº†æ ·å¼çš„ä½œç”¨åŸŸï¼Œä»è€Œé¿å…äº†æ ·å¼å†²çªã€‚
- CSS-in-JS çš„å†™æ³•éå¸¸çµæ´»ï¼Œåœ¨ styled-components å†…éƒ¨å†™æ ·å¼å’ŒåŸç”Ÿ CSS çš„ç”¨æ³•å‡ ä¹ä¸€æ ·ï¼Œä¸”å¯ä»¥åŠ¨æ€è·å–ç»„ä»¶æ‰€ä¼ å…¥çš„å‚æ•°ï¼Œæ¥è¿›è¡Œæ¡ä»¶æ ·å¼çš„æ§åˆ¶ï¼ŒåŠŸèƒ½æ›´åŠ å¼ºå¤§ï¼Œå†™æ³•ä¹Ÿæ›´åŠ ç®€æ´ï¼Œå‡å°‘äº†è¿‡å»å¤§é‡çš„å†—ä½™ä»£ç ã€‚
- æ ·å¼ä¸ç»„ä»¶ä¹‹é—´å…·æœ‰æ˜ç¡®çš„å¯¹åº”å…³ç³»ï¼Œæœ‰åŠ©äºæ ·å¼ä»£ç çš„ç»´æŠ¤å¹¶ä¸”å¯ä»¥å¾ˆå¥½åœ°æ”¯æŒ Critical CSSã€‚

#### ç¼ºç‚¹

- ä¸åŒç‰ˆæœ¬çš„é€‚é…é—®é¢˜ã€åŒ…ä½“ç§¯å¢å¤§ï¼ˆå‘é€ç»™å®¢æˆ·ç«¯çš„æ–‡ä»¶é‡Œä¼šé¢å¤–åŒ…å« styled-components çš„ run time ä»£ç ï¼‰ã€ç»„ä»¶åŒ…è£¹å¼çš„æ ·å¼æ·»åŠ æ–¹å¼ä¹Ÿä¼šä½¿å¾— ReactDevTools ç»“æ„æ›´åŠ å¤æ‚......

- æ€§èƒ½å¼€é”€é—®é¢˜

  - **Frequently inserting CSS rules forces the browser to do a lot of extra work.**
  - â€œIn concurrent rendering, React can yield to the browser between renders. If you insert a new rule in a component, then React yields, the browser then have to see if those rules would apply to the existing tree. So it recalculates the style rules. Then React renders the next component, and then that component discovers a new rule and it happens again.
    **Update 2022-10-25:** This quote from Sebastian is specifically referring to performance in React Concurrent Mode, **without** `useInsertionEffect`. I recommend reading the full discussion if you want an in-depth understanding of this. Thanks to Dan Abramov for [pointing out](https://twitter.com/dan_abramov/status/1584838817982590976) this inaccuracy on Twitter.â€ (from [Sam Magura](https://dev.to/srmagura))

- æ ·å¼ä¸ç¨³å®šé—®é¢˜

  - â€œæ ·å¼æ’å…¥ä¼˜å…ˆçº§æ— æ³•è‡ªå®šä¹‰ï¼Œè¿™å°±å¯¼è‡´äº§ç”Ÿæ ·å¼è¦†ç›–æ—¶ï¼Œä¸šåŠ¡å¯¹æ ·å¼è¦†ç›–çš„ä¼˜å…ˆçº§æ— æ³•äº§ç”Ÿç¨³å®šçš„é¢„æœŸã€‚class ä¼˜å…ˆçº§ç”± header å®šä¹‰é¡ºåºå†³å®šï¼Œè€Œé className çš„å­—ç¬¦é¡ºåºå†³å®šï¼Œè€Œ header å®šä¹‰é¡ºåºåˆç”±èµ„æºåŠ è½½ä¸ css-in-js æ’å…¥æ‰§è¡Œæ—¶æœºå†³å®šï¼Œå¯¼è‡´ä¸šåŠ¡å‡ ä¹ä¸å¯èƒ½æœ‰ç¨³å®šçš„æ ·å¼è¦†ç›–é¡ºåºã€‚è¿™é‡Œäº§ç”Ÿçš„é—®é¢˜å°±æ˜¯ä¸šåŠ¡ä»£ç ä¸æ–­å¢å¤šçš„ `!important` å®šä¹‰ã€‚â€ï¼ˆã€Šå‰ç«¯ç²¾è¯»å‘¨åˆŠã€‹â€”263ï¼‰

  - ç¤¾åŒºé‡Œä¹Ÿæœ‰ä¸€äº›ç›¸å…³çš„å®é™…åœºæ™¯ï¼š

    - [styled-components ä½¿ç”¨ loadable æ‡’åŠ è½½æ—¶æ ·å¼ä¼˜å…ˆçº§é—®é¢˜](https://soonwang.cn/2022/02/13/react-styled-components-and-loadable/)

    - [è®°ä¸€æ¬¡ ç»„ä»¶åº“æ ·å¼æŒ‰éœ€å¼•å…¥ ä¸ styled components å¯¼è‡´çš„ Bug æ’æŸ¥åˆ†æ](https://juejin.cn/post/7092423334037553182)

  - æˆ‘è‡ªå·±ä¹Ÿåœ¨æœ¬åœ°æ¨¡æ‹Ÿäº†ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œè‹¥ style.css çš„æ’å…¥é¡ºåºåœ¨ Styled-components ä¹‹åï¼Œåˆ™ç”±äºæ ·å¼ä¼˜å…ˆçº§é—®é¢˜ï¼Œæœ€ç»ˆä¼šäº§ç”Ÿæ ·å¼å†²çªï¼Œå¯¼è‡´ ComponentA å’Œ ComponentC ç»„ä»¶çš„æ ·å¼è¦†ç›–å¤±æ•ˆã€‚ï¼ˆä½†ä¸ªäººæ„Ÿè§‰åªè¦é€‰æ‹©å™¨å†™å¾—è¶³å¤Ÿç»†ï¼Œå°±èƒ½åœ¨ä¸€å®šç¨‹åº¦ä¸Šé¿å…è¿™ç§é—®é¢˜ï¼Œä½†ä¸šåŠ¡ä»£ç ä¹Ÿä¼šéšä¹‹å˜é•¿ï¼Œå¯¼è‡´å¯è¯»æ€§é™ä½ï¼Œéš¾ä»¥è¿›è¡Œåç»­ç»´æŠ¤.......ï¼‰

  - ```javascript
    // ComponentB.js
    import React from 'react';
    import styled from 'styled-components';

    const StyledDiv = styled.div`
    .test-div {
        color: yellow;
      }
    `

    const ComponentB = (props) => {
      const {children, ...restProps} = props;
      return (
      <StyledDiv {...restProps}>
        <div className='test-div test-div1'>{children}</div>
      </StyledDiv>
      )
    };

    export default ComponentB;

    // ComponentA.js
    import React from 'react';
    import styled from 'styled-components';
    import ComponentB from './ComponentB';

    const StyledDiv = styled(ComponentB)`
    .test-div {
        color:blue;
      }
    `

    const ComponentA = (props) => {
      const {children, ...restProps} = props;
      return (
      <StyledDiv {...restProps}>{children}</StyledDiv>
      )
    };

    export default ComponentA;

    // ComponentC.js
    import React from 'react';
    import styled from 'styled-components';
    import ComponentB from './ComponentB';

    const StyledDiv = styled(ComponentB)`
    .test-div {
        color: green;
      }
    `

    const ComponentC = (props) => {
      const {children, ...restProps} = props;
      return (
      <StyledDiv {...restProps}>{children}</StyledDiv>
      )
    };

    export default ComponentC;

    // style.css
    .test-div.test-div1{
      color: purple;
    }

    // æœ€ç»ˆStyled-componentsæ‰€æ’å…¥çš„æ ·å¼
    <style data-styled="active" data-styled-version="6.0.0-rc.3">
    .dvtBrr .test-div{color:yellow;}.dxEcBv .test-div{color:blue;}.gnBMTv .test-div{color:green;}
    </style>
    ```

### åº•å±‚åŸç†

- å‚è§ä¸Šä¸€ç¯‡æ–‡ç« [Styled-components åº•å±‚åŸç†è§£æ](https://russellwzr.github.io/blog/20230606_SCProcess/)

## TailwindCSS

### ç¤ºä¾‹

```javascript
// StyledButton.js
import React from 'react'

export default function StyledButton(props) {
  const { color, ...restProps } = props
  return (
    <button
      className={`rounded-full px-6 py-2 text-white ${
        color === 'blue' ? 'bg-sky-400 hover:bg-sky-300' : 'bg-red-400 hover:bg-red-300'
      }`}
      {...restProps}
    />
  )
}

// App.js
import React from 'react'
import StyledButton from './StyledButton'

function App() {
  return (
    <div>
      <StyledButton color="blue">Blue Button</StyledButton>
      <StyledButton color="red">Red Button</StyledButton>
    </div>
  )
}

export default App
```

### åˆ†æ

æ™ºèƒ½æç¤º + åŸå­åŒ–çš„è®¾è®¡ï¼ˆé€šè¿‡ç»„åˆå¤šä¸ªåŸå­æ ·å¼æ¥å®ç°é«˜é˜¶æ ·å¼ï¼Œæ‰“åŒ…æ—¶åªéœ€æ‰“åŒ…åŸå­æ ·å¼ï¼Œå¯ä»¥å‡è½»æ ·å¼æ–‡ä»¶çš„ä½“ç§¯ã€‚ps: åˆæ¬¡æ¥è§¦ TailwindCSS æ—¶ï¼Œå®ƒè®©æˆ‘è”æƒ³åˆ°äº† RISC æŒ‡ä»¤é›† ğŸ˜‚ï¼‰+ å‡ºè‰²çš„å®˜æ–¹æ–‡æ¡£ï¼Œä½†å®é™…å†™èµ·æ¥å¤ªçˆ½äº†ï¼ç¼ºç‚¹å°±æ˜¯é•¿é•¿çš„æ ·å¼åç§°å †ç§¯åœ¨ className ä¸­ï¼Œè®©é¡¹ç›®ä»£ç æ˜¾å¾—è¿‡äºæ‚ä¹±......å½“ç„¶ï¼Œä¹Ÿå¯ä»¥å°è¯•é‡‡ç”¨ TailwindCSS + CSS Modules æˆ–è€… TailwindCSS + Styled-components çš„æ··åˆæ–¹æ¡ˆï¼Œæœ€è¿‘å†™ä¸ªäººç½‘ç«™æ—¶å°è¯•äº† [twin.macro](https://github.com/ben-rogerson/twin.macro) (The magic of Tailwind with the flexibility of css-in-js)ï¼Œæ„Ÿè§‰å¼€å‘æ•ˆç‡æœ‰äº†è´¨çš„æå‡~

## Reference

- [çŸ¥ä¹ï¼šCSS in JS çš„å¥½ä¸å](https://zhuanlan.zhihu.com/p/103522819)
- [æ˜é‡‘ï¼šReact ä¸­äº”ç§å¸¸è§çš„æ ·å¼ç­–ç•¥](https://juejin.cn/post/7041745627323056142)
- [ã€Šå‰ç«¯ç²¾è¯»å‘¨åˆŠã€‹ï¼šè¯·åœæ­¢ css-in-js çš„è¡Œä¸º](https://github.com/ascoders/weekly/blob/master/%E5%89%8D%E6%B2%BF%E6%8A%80%E6%9C%AF/7.%E7%B2%BE%E8%AF%BB%E3%80%8A%E8%AF%B7%E5%81%9C%E6%AD%A2%20css-in-js%20%E7%9A%84%E8%A1%8C%E4%B8%BA%E3%80%8B.md)
- [ã€Šå‰ç«¯ç²¾è¯»å‘¨åˆŠã€‹ï¼šæˆ‘ä»¬ä¸ºä½•å¼ƒç”¨ css-in-js](https://github.com/ascoders/weekly/blob/master/%E5%89%8D%E6%B2%BF%E6%8A%80%E6%9C%AF/263.%E7%B2%BE%E8%AF%BB%E3%80%8A%E6%88%91%E4%BB%AC%E4%B8%BA%E4%BD%95%E5%BC%83%E7%94%A8%20css-in-js%E3%80%8B.md)
- [Why We're Breaking Up with CSS-in-JS](https://dev.to/srmagura/why-were-breaking-up-wiht-css-in-js-4g9b)
